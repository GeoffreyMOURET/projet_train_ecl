(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1001:function(e,t,a){"use strict";var n=a(200),o=a.n(n),r=a(0),c=a.n(r),i=a(11),s=a.n(i),l=a(16),u=a(1162),m=a(9),d=a(172),p=a(997),f=a.n(p),h=function(e){var t=e.tag,a=e.emplacement,n=e.trackSearchSuggestionClick,o=e.className;return c.a.createElement(u.a,{className:s()(f.a.smallTag,o),to:Object(d.b)(t.title),title:"".concat(t.title," images"),onClick:function(){return n(t.title.toLowerCase(),a)}},t.title)};h.displayName="SmallTag";var b={trackSearchSuggestionClick:m.hb},g=Object(l.connect)(function(){return{}},b)(h),v=a(999),y=a.n(v),O=function(e){var t=e.tags,a=e.emplacement,n=e.takeN;return c.a.createElement("div",{className:y.a.tagsContainer},(n?o()(t,n):t).map(function(e){return c.a.createElement("div",{key:e.title,className:y.a.tagItem},c.a.createElement(g,{tag:e,emplacement:a}))}))};O.displayName="SmallTagsList";var _=O;a.d(t,"a",function(){return _})},1002:function(e,t,a){e.exports={colorWhite:"#fff",colorLightGrey:"#ddd",colorGrey:"#999",colorDarkGrey:"#777",colorBlue:"#007fff",colorDarkBlue:"#006aff",colorBlack:"#000",followButton:"_3nDcb",isFollowing:"_2br-F",followIcon:"_2BKrY"}},1014:function(e,t,a){e.exports={"--sm":"(--sm)","--md-min":"(--md-min)",colorGrey:"#999",colorDarkWhite:"#f5f5f5",colorLightBlack:"#111",headingXs:"_2uOAz",fontWeightSemibold:"_13Ib2",truncate:"_1ByhS",textDecorationNone:"_1CBrG",maxWidth:"750px",smallImagePercentage:"30%",bigImagePercentage:"70%",aspectRatioWrapper:"_2Dp1M",collectionContainer:"_28_Yu",linkWrapper:"fM0CB _1CBrG",imagesContainer:"_2zwgf",smallImagesContainer:"_2gO6E",image:"Kh8bw",bigImageWrapper:"_2vGrb",smallImageWrapper:"mTW0H",titleContainer:"_3zVYZ _1ByhS",iconPrivate:"_39uDR",title:"_2LKkn _2uOAz _13Ib2 _1ByhS",description:"_3-HBj _1ByhS",userLink:"_37zDu"}},1023:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(e){return function(t){return e.username===t.username}}},1026:function(e,t,a){"use strict";a(20),a(21),a(14);var n=a(11),o=a.n(n),r=a(4),c=a.n(r),i=a(171),s=a.n(i),l=a(0),u=a.n(l),m=a(16),d=a(1494),p=a(1493),f=a(1486),h=a(9),b=a(55),g=a(17),v=a(13),y=a(19),O=a(33),_=a(23),E=Object(_.a)("M31.2 12.8h-2.4v-2.4c0-.4-.4-.8-.8-.8h-1.6c-.4 0-.8.4-.8.8v2.4h-2.4c-.4 0-.8.4-.8.8v1.6c0 .4.4.8.8.8h2.4v2.4c0 .4.4.8.8.8h1.6c.4 0 .8-.4.8-.8v-2.4h2.4c.4 0 .8-.4.8-.8v-1.6c0-.4-.4-.8-.8-.8zm-15.2 5.1v-1.2c1.9-1.1 3.2-3.1 3.2-5.5v-1.6c0-3.5-2.9-6.4-6.4-6.4s-6.4 2.9-6.4 6.4v1.6c0 2.4 1.3 4.4 3.2 5.5v1.2c-5.5.9-9.6 4-9.6 7.7v1.6c0 .9.7 1.6 1.6 1.6h22.4c.9 0 1.6-.7 1.6-1.6v-1.6c0-3.7-4.1-6.8-9.6-7.7z"),I=a(38),S=a(51),w=a(1002),j=a.n(w);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=Object(v.a)()({labelText:{isFollowing:"Following",isNotFollowing:"Follow"}}),k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N(this,D(t).apply(this,arguments))}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,l["Component"]),a=t,(n=[{key:"componentWillUnmount",value:function(){this.followSubscription&&this.followSubscription.unsubscribe()}},{key:"getLabelText",value:function(){var e=this.props.labelText;return this.props.selectedUser.followed_by_user?e.isFollowing:e.isNotFollowing}},{key:"buildToLink",value:function(){var e=this.props,t=e.authUser,a=e.location,n=Object(g.g)(a),o=t?n:Object.assign({},n,{login_view:"is_visible",login_action:"follow"});return{pathname:a.pathname,search:Object(y.c)(o),state:a.state}}},{key:"buildClickHandler",value:function(){var e=this,t=this.props,a=t.authUser,n=t.selectedUser,o=t.followUser,r=t.unfollowUser,c=t.trackFollowButtonClick,i=t.trackUnfollowButtonClick,s=t.buttonType;if(!a)return function(){return c(n.id,s)};var l=n.username,u=n.followed_by_user,m=(u?b.a.users.unfollowUser:b.a.users.followUser)({username:l}).pipe(Object(p.a)(3),Object(f.a)(1));return function(t){t.stopPropagation(),u?(r(n.id),i(n.id,s)):(o(n.id),c(n.id,s)),e.followSubscription=m.subscribe()}}},{key:"renderContainer",value:function(e){var t=this.props,a=t.selectedUser,n=t.className,r=t.redirectAfterFollow,c=t.authUser,i=this.buildClickHandler(),s=a.followed_by_user,l=r||!c,m={className:o()(j.a.followButton,s&&j.a.isFollowing,n),buttonSize:"small"};return l?u.a.createElement(S.a,Object.assign({tag:"link",to:this.buildToLink(),onMouseUp:i},m),e):u.a.createElement(S.a,Object.assign({tag:"button",onMouseUp:i},m),e)}},{key:"render",value:function(){var e=this.props,t=e.selectedUser,a=e.authUser;return s()(a,"username")===t.username?u.a.createElement("div",null):this.renderContainer(u.a.createElement("span",null,u.a.createElement(E,{className:j.a.followIcon}),this.getLabelText()))}}])&&T(a.prototype,n),r&&T(a,r),t}();k.displayName="FollowButton";Object(O.a)(P)(k);var x={trackFollowButtonClick:h.Y,trackUnfollowButtonClick:h.jb,followUser:h.q,unfollowUser:h.mb},L=c()(Object(m.connect)(function(e){return{authUser:Object(I.c)(e)}},x),d.a,Object(O.a)(P))(k);a.d(t,"a",function(){return L})},1032:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return o});var n=600,o=500},1033:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"b",function(){return o}),a.d(t,"d",function(){return r}),a.d(t,"a",function(){return c});var n=4,o=12,r=30,c=30},1038:function(e,t,a){"use strict";a(109);var n,o=a(3),r=a(4),c=a.n(r),i=a(0),s=a.n(i),l=a(16),u=a(1162),m=a(427),d=a(18),p=a(199),f=a(104),h=a(13),b=a(33),g=a(268),v=a(38),y=a(435),O=a(1001),_=a(437),E=a(428),I=a(429),S=a(86),w=a(1014),j=a.n(w),R=Object(E.g)(Object(E.c)({styles:j.a,className:"maxWidth",fallback:"200"}));!function(e){e.full="full",e.half="half"}(n||(n={}));var T=function(e){return e.urls.raw},N=function(e){return function(t){return{src:Object(S.d)(t)({w:R}),srcSet:Object(I.b)({baseUrl:t,width:R*function(e){switch(e){case n.full:return Object(E.f)(Object(E.c)({styles:j.a,className:"bigImagePercentage",fallback:"50%"}));case n.half:return Object(E.f)(Object(E.c)({styles:j.a,className:"smallImagePercentage",fallback:"50%"}))}}(e),getParams:o.a.none()})}}},D=function(e,t,a){return e.chain(function(e){return Object(h.c)(t,e)}).map(T).map(N(a))},C=Object(h.a)()({showUserInfo:!0}),P=function(e){var t=e.collection,a=e.isLoggedIn,r=e.showUserInfo,c=t.user,i=t.total_photos,l=t.preview_photos,h=t.private,b=t.tags,v=Object(d.a)(t),E=Object(p.c)(t),I=o.a.of(l),S=D(I,0,n.full),w=D(I,1,n.half),R=D(I,2,n.half),T=r?s.a.createElement("span",null," ","Â· Curated by"," ",a?s.a.createElement(u.a,{to:Object(f.c)(c),className:j.a.userLink},c.name):c.name):null;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:j.a.aspectRatioWrapper},s.a.createElement("div",{className:j.a.collectionContainer},s.a.createElement(u.a,{to:{pathname:E},className:j.a.linkWrapper},s.a.createElement("div",{className:j.a.imagesContainer},S.map(function(e){var t=e.src,a=e.srcSet;return s.a.createElement(y.a,{role:"presentation",containerClassName:j.a.bigImageWrapper,className:j.a.image,src:t,srcSet:a})}).getOrElse(s.a.createElement("div",{className:j.a.bigImageWrapper})),s.a.createElement("div",{className:j.a.smallImagesContainer},w.map(function(e){var t=e.src,a=e.srcSet;return s.a.createElement(y.a,{role:"presentation",containerClassName:j.a.smallImageWrapper,className:j.a.image,src:t,srcSet:a})}).getOrElse(s.a.createElement("div",{className:j.a.smallImageWrapper})),R.map(function(e){var t=e.src,a=e.srcSet;return s.a.createElement(y.a,{role:"presentation",containerClassName:j.a.smallImageWrapper,className:j.a.image,src:t,srcSet:a})}).getOrElse(s.a.createElement("div",{className:j.a.smallImageWrapper})))),s.a.createElement("div",{className:j.a.titleContainer},h&&s.a.createElement("span",{className:j.a.isPrivateContainer},s.a.createElement(_.a,{className:j.a.isPrivateTooltip,label:"This collection is private. To share, copy the URL or make the collection public.",width:200},s.a.createElement(g.a,{className:j.a.iconPrivate}))),s.a.createElement("div",{className:j.a.title},v))),s.a.createElement("div",{className:j.a.description},i," photos",T))),s.a.createElement(O.a,{tags:b,takeN:3,emplacement:m.a.CollectionCard}))};P.displayName="CollectionCard";var k=c()(Object(l.connect)(function(e,t){return{isLoggedIn:Object(v.g)(e)}}),Object(b.a)(C))(P);a.d(t,"a",function(){return k})},1043:function(e,t,a){e.exports={"--sm":"(--sm)","--sm-min":"(--sm-min)","--md-min":"(--md-min)",colorLightGrey:"#ddd",placeholderBackground:"_2VWD4",gutter:"12px",oneHundrendPercent:"100%",fiftyPercent:"50%",collectionContainer:"_15M91",placeholderAspectRatioWrapper:"_2rCoL",placeholderContainer:"_3jSxL",placeholder:"_1X2ch _2VWD4",placeholderTextBox:"_3I0Nd _2VWD4",placeholderTextBox2:"mpqhr _2VWD4",placeholderTextBox3:"yxc4t _2VWD4",placeholderTextBox1:"_2pqeA _2VWD4"}},1045:function(e,t,a){"use strict";t.__esModule=!0;var n=r(a(1046)),o=r(a(1047));r(a(431)),r(a(432));function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return(0,n.default)(function(e,t){return!(0,o.default)(e,t)})(e)}},1046:function(e,t,a){"use strict";t.__esModule=!0;var n=a(0);o(a(431)),o(a(432));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return function(t){var a=(0,n.createFactory)(t);return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype.shouldComponentUpdate=function(t){return e(this.props,t)},n.prototype.render=function(){return a(this.props)},n}(n.Component)}}},1047:function(e,t,a){"use strict";t.__esModule=!0;var n,o=a(625),r=(n=o)&&n.__esModule?n:{default:n};t.default=r.default},1049:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(1038),c=a(1043),i=a.n(c),s=function(e){var t=e.collection;return o.a.createElement("div",{className:i.a.collectionContainer,"data-test":"collection-feed-card"},t?o.a.createElement(r.a,{collection:t}):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:i.a.placeholderAspectRatioWrapper},o.a.createElement("div",{className:i.a.placeholderContainer},o.a.createElement("div",{className:i.a.placeholder}),o.a.createElement("div",{className:i.a.placeholderTextBox}),o.a.createElement("div",{className:i.a.placeholderTextBox2}))),o.a.createElement("div",{className:i.a.placeholderTextBox3})))};s.displayName="CollectionFeedCard";var l=s;a.d(t,"a",function(){return l})},1055:function(e,t,a){e.exports={"--sm-min":"(--sm-min)",containerLayout:"PrOBO",containerPadding:"_1CR66",fontWeightNormal:"_27Bp2",container:"_3w_cF PrOBO _1CR66",heading:"_2azK- _27Bp2",hideOnMobile:"_1Co2N"}},1075:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return s});var n=a(4),o=a.n(n),r=a(0),c=a(44),i=function(e){var t=e.render;return o()(function(e){return e.map(function(e){var a=e.maybeEl,n=e.key;return a.map(t).map(function(e){return function(t){return Object(r.cloneElement)(t,{key:e})}}(n))})},c.a)},s=function(e){var t=e.render,a=e.renderItem;return o()(i({render:a}),c.c,function(e){return e.map(t)})}},1082:function(e,t,a){"use strict";var n=a(11),o=a.n(n),r=a(200),c=a.n(r),i=a(0),s=a.n(i),l=a(1033),u=a(427),m=a(13),d=a(33),p=a(1001),f=a(1055),h=a.n(f),b=Object(m.a)()({keywords:[],headingCopy:"Related searches",showHeading:!1,hideOnMobile:!1,maximumResultsCount:l.b}),g=function(e){var t=e.showHeading,a=e.keywords,n=e.hideOnMobile,r=e.headingCopy,i=e.maximumResultsCount,l=c()(a,i);return 0===l.length?s.a.createElement("div",null):s.a.createElement("div",{className:o()(h.a.container,n&&h.a.hideOnMobile)},t&&s.a.createElement("p",{className:h.a.heading},r),s.a.createElement(p.a,{tags:l,emplacement:u.a.Related}))};g.displayName="RelatedTags";var v=Object(d.a)(b)(g);a.d(t,"a",function(){return v})},1091:function(e,t,a){e.exports={fontWeightNormal:"_27Bp2",clearfix:"_2KLco",gutterContainer:"_2npM8",contentContainer:"_33G6- _2npM8",heading:"_2gjZV _33G6- _2npM8",flexFeed:"_3b8t6"}},1093:function(e,t,a){e.exports={spacingUnit:"4px",flexContainer:"_10F2J",icon:"_1xhtJ",text:"_3UPwX"}},1095:function(e,t,a){e.exports={spacingUnit:"4px",fontWeightNormal:"_27Bp2",colorFacebook:"#3b5998",colorTwitter:"#1da1f2",colorPinterest:"#c92228",colorDarkGrey:"#777",containerPaddingUnit:"calc(4px * 4)",cellPaddingUnit:"calc(4px * 2)",cellPaddingUnitHalf:"4px",headerFontSize:"21px",smallFontSize:"12px",container:"_2VlB5",cell:"_1dPrd",halfCell:"_201D8",title:"_32uh- _27Bp2",subtitle:"_2B7-n",shareLinks:"_3E7sP",shareLinkContainer:"_1J04C",shareLink:"_2SPjs",shareLinkIcon:"_2U6YH",facebookShareLinkIcon:"_272Go _2U6YH",twitterShareLinkIcon:"_1tkzW _2U6YH",pinterestShareLinkIcon:"ZO3Vz _2U6YH",emailShareLinkIcon:"_2L646 _2U6YH",shareLinkText:"_1Wr08"}},1110:function(e,t,a){"use strict";a.d(t,"a",function(){return s});a(14);var n=a(0),o=a.n(n),r=a(16),c=a(128),i=a(201),s=function(e){var t=function(t){return o.a.createElement(e,Object.assign({},t,{photos:t.photos}))};t.displayName="MapPhotoIdsToPhotos(".concat(Object(c.a)(e),")");return Object(r.connect)(function(){var e=Object(i.g)();return function(t,a){return{photos:e(t,a.photoIds)}}})(t)}},1113:function(e,t,a){"use strict";var n;function o(e){var t=e.width,a=e.height;return a>t?n.portrait:a<t?n.landscape:n.square}function r(e){return o(e)===n.landscape}a.d(t,"a",function(){return r}),a.d(t,"b",function(){return c}),function(e){e.portrait="portrait",e.landscape="landscape",e.square="square"}(n||(n={}));var c=function(e){var t=o(e);return t===n.square||t===n.portrait}},1114:function(e,t,a){"use strict";var n=a(23);t.a=Object(n.a)("M16 0c-6.7 0-12 5.3-12 12 0 8.6 8.6 17.3 11.2 19.7.4.4 1.1.4 1.5 0 2.7-2.4 11.3-11.1 11.3-19.7 0-6.7-5.3-12-12-12zm0 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6z")},1115:function(e,t,a){"use strict";var n=a(23);t.a=Object(n.a)("M16 0c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm2 25c0 .6-.4 1-1 1h-2c-.6 0-1-.4-1-1v-12c0-.6.4-1 1-1h2c.6 0 1 .4 1 1v12zm0-16c0 .6-.4 1-1 1h-2c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1h2c.6 0 1 .4 1 1v2z")},1116:function(e,t,a){e.exports={colorGrey:"#999",outerHorizontalGutter:"16px",innerHorizontalGutter:"8px",cellPadding:"calc(8px / 2)",container:"_307c3",actions:"_3-6v7",cell:"_2iWc-",buttonCell:"_27vvN _2iWc-",photographer:"HAAez _2iWc-",downloadButtonCell:"_13Q- _27vvN _2iWc-",downloadButton:"_1AA_u",secondaryLabel:"_2cSl3"}},1134:function(e,t,a){"use strict";a(20),a(21),a(14),a(34);var n=a(11),o=a.n(n),r=a(3),c=a(0),i=a.n(c),s=a(426),l=a(23),u=Object(l.a)("M0 26c0 1.7.2 3.3.6 4.9.2.9.7.9 1 0 2.1-5.3 5.5-10.3 11.1-11.3h3.3v4.4c0 2 1.2 2.6 2.6 1.4l12.8-11c.7-.6.7-1.6 0-2.3l-12.8-11c-1.4-1.3-2.6-.6-2.6 1.3v4.7c-9.6 1.6-16 9.4-16 18.9z"),m=a(51),d=a(1093),p=a.n(d);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=b(this,g(t).call(this,e))).state=a.getInitialState(),a}var a,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,c["PureComponent"]),a=t,(n=[{key:"getInitialState",value:function(){var e=this,t=this.props.renderType;return{maybeShareFunction:s.a.match({Enhanced:function(){return r.a.some(window)},Unenhanced:function(){return r.a.none()}})(t).chain(function(e){return void 0!==e.navigator.share?r.a.some(function(t){return e.navigator.share(t)}):r.a.none()}).map(function(t){var a=e.props.shareOptions;return function(){return t(a)}})}}},{key:"renderContent",value:function(){return i.a.createElement("div",{className:p.a.flexContainer},i.a.createElement(u,{className:p.a.icon}),i.a.createElement("span",{className:p.a.text},"Share"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.shareLocationDescriptor,n=t.className,r=this.state.maybeShareFunction,c={className:o()(p.a.flexContainer,n),buttonType:"outline",buttonSize:"small"};return r.map(function(t){return i.a.createElement(m.a,Object.assign({tag:"button",onClick:t},c),e.renderContent())}).getOrElseL(function(){return i.a.createElement(m.a,Object.assign({tag:"link",to:a},c),e.renderContent())})}}])&&h(a.prototype,n),l&&h(a,l),t}(),O=Object(s.b)(y);a.d(t,"a",function(){return O})},1139:function(e,t,a){"use strict";a(345),a(14),a(34);var n=a(157),o=a.n(n),r=a(11),c=a.n(r),i=a(0),s=a.n(i),l=a(457),u=a(282),m=a(302),d=a(283),p=a(213),f=a(459),h=a(1095),b=a.n(h),g=function(e){return s.a.createElement(p.b,Object.assign({},e,{className:b.a.shareLink,buttonType:"outline"}),(t={buttonShareType:e.type},a=t.buttonShareType,p.a.match({email:function(){return s.a.createElement(l.a,{className:b.a.emailShareLinkIcon})},facebook:function(){return s.a.createElement(u.a,{className:b.a.facebookShareLinkIcon})},twitter:function(){return s.a.createElement(d.a,{className:b.a.twitterShareLinkIcon})},pinterest:function(){return s.a.createElement(m.a,{className:b.a.pinterestShareLinkIcon})}})(a)),s.a.createElement("span",{className:b.a.shareLinkText},o()(e.type.tag)));var t,a},v=function(e){var t=e.title,a=e.buttonsShareProps,n=e.link;return s.a.createElement("div",null,s.a.createElement("div",{className:b.a.container},s.a.createElement("div",{className:b.a.cell},s.a.createElement("h2",{className:b.a.title},"Share"),s.a.createElement("span",{className:b.a.subtitle},t)),s.a.createElement("div",{className:c()(b.a.halfCell,b.a.shareLinks)},a.map(function(e){return s.a.createElement("div",{key:e.type.tag,className:c()(b.a.halfCell,b.a.shareLinkContainer)},g(e))})),s.a.createElement("div",{className:b.a.cell},s.a.createElement(f.a,{buttonText:"Copy link"},n))))};v.displayName="ShareModalContent";var y=v;a.d(t,"a",function(){return y})},1140:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(16),c=a(13),i=a(33),s=a(274),l=a(1049),u=a(1091),m=a.n(u),d=Object(c.a)()({relatedCollectionIds:[]}),p=function(e){var t=e.relatedCollections,a=e.heading;return 0===t.length?null:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:m.a.clearfix},o.a.createElement("p",{className:m.a.heading},a)),o.a.createElement("div",{className:m.a.flexFeed},t.map(function(e,t){return o.a.createElement(l.a,{key:t,collection:e})})))};p.displayName="RelatedCollections";var f=Object(i.a)(d)(Object(r.connect)(function(e,t){return{relatedCollections:Object(s.c)(e,t.relatedCollectionIds)}})(p));a.d(t,"a",function(){return f})},1150:function(e,t,a){e.exports={resetBtn:"DWLeW",spacingUnit:"4px",centerItem:"_3mCZ_",isFixedMediaCondition:"(max-width: 767px)",isZoomableMediaCondition:"(min-width: 768px)",imagePlaceholder:"_2yFK-",imageContainer:"_1ac-D _3mCZ_",imageButton:"_1szcv DWLeW",overlay:"_2MKkb",imageButtonZoomedIn:"_2-OhB",imageButtonZoomedOut:"_1YS_6",overlayChild:"_1w7cG",zoomToggleIcon:"_1NYtf",isFixed:"pADQw",isZoomable:"_2QvSN"}},1344:function(e,t,a){var n=a(1345)(function(e,t){return e+t},0);e.exports=n},1345:function(e,t,a){var n=a(1346),o=a(635);e.exports=function(e,t){return function(a,r){var c;if(void 0===a&&void 0===r)return t;if(void 0!==a&&(c=a),void 0!==r){if(void 0===c)return r;"string"==typeof a||"string"==typeof r?(a=o(a),r=o(r)):(a=n(a),r=n(r)),c=e(a,r)}return c}}},1346:function(e,t,a){var n=a(233),o=NaN;e.exports=function(e){return"number"==typeof e?e:n(e)?o:+e}},1347:function(e,t){
/*!
 * array-to-sentence | MIT (c) Shinnosuke Watanabe
 * https://github.com/shinnn/array-to-sentence
*/
e.exports=function(e,t){"use strict";if(!Array.isArray(e))throw new TypeError(String(e)+" is not an array. Expected an array.");function a(e){if("string"!=typeof t[e])throw new TypeError(String(t[e])+" is not a string. `"+e+"` option must be a string.")}return void 0===(t=t||{}).separator?t.separator=", ":a("separator"),void 0===t.lastSeparator?t.lastSeparator=" and ":a("lastSeparator"),0===e.length?"":1===e.length?e[0]:e.slice(0,-1).join(t.separator)+t.lastSeparator+e[e.length-1]}},1348:function(e,t,a){e.exports={truncate:"_1ByhS",resetBtn:"DWLeW",containerTruncated:"_3PLD4",text:"KNDj7",textNotTruncated:"_2FfeD",textTruncated:"b5rtm _1ByhS",toggleButton:"_19oEl DWLeW",expandButton:"_2mJKr"}},1350:function(e,t,a){e.exports={colorGrey:"#999",colorLightBlack:"#111",descriptionExpanded:"_2tqNT",descriptionTruncationNotRequired:"_1fn3S",descriptionTruncated:"_3kvp0"}},1352:function(e,t,a){e.exports={smallFontSize:"12px",outerHorizontalGutter:"16px",innerHorizontalGutter:"8px",cellPadding:"calc(8px / 2)",spacingUnit:"4px",colorLightBlack:"#111",truncate:"_1ByhS",fontWeightMedium:"xLon9",resetBtn:"DWLeW",container:"_1ltEq",cell:"_3dxKb",halfCell:"_3kEvh",textContainer:"_2DxLe _3kEvh",textContainerNotTruncated:"gfzKD",textContainerTruncated:"OD7Kw",textContainerItem:"_28uSB _3kEvh",locationLink:"_2RL3a xLon9",locationIcon:"_15of1",locationTitle:"_20NLS _1ByhS",button:"_3JXJ6",buttonIcon:"_1rYbs",buttonText:"_1efgd",smallButton:"ldOpn"}},1356:function(e,t,a){e.exports={fontWeightNormal:"_27Bp2",clearfix:"_2KLco",gutterContainer:"_2npM8",contentContainer:"_1zDIT _2npM8",heading:"_1-q17 _2npM8 _27Bp2"}},1358:function(e,t,a){e.exports={containerLayout:"PrOBO",wrapper:"WMwuA",container:"_1OYbO PrOBO",stickyHeaderContainer:"_33qjA",spinnerWrapper:"xn9xU"}},1360:function(e,t,a){e.exports={modalContent:"_29NeT"}},1362:function(e,t,a){e.exports={colorGrey:"#999",fontWeightMedium:"xLon9",lineHeightTitle:"U8wGh",lineHeightCopy:"_13hUA",containerPaddingUnit:"16px",cellPaddingUnit:"8px",headerFontSize:"21px",smallFontSize:"12px",placeholderBackground:"_2VWD4",container:"_11so1",cell:"_3aBA9",col:"Rs1Ko",containerTitle:"_3dtte _11so1",containerFooter:"_2qSy1 _11so1",title:"_2dIZQ U8wGh",datePublished:"_1vScU",p:"_5UTXm",stats:"_19Kkj _11so1",stat:"_1H3Tk _3aBA9 Rs1Ko",statLabel:"_2FiKI",statLabelIcon:"_2nkiz",statLabelText:"B5nBa xLon9",statValue:"_2zoGD",statValueTotal:"_20G9q _13hUA",statValueDelta:"_3R4g7",metadataItemName:"_24YMC",hr:"_1CXhw",metadata:"_1Z2CJ _11so1",metadataItem:"_1XYV- _3aBA9 Rs1Ko",metadataItemValue:"_3Dok4",statValueTotalPlaceholder:"_19b04 _2VWD4",statValueDeltaPlaceholder:"_2rDWN _2VWD4"}},1364:function(e,t,a){e.exports={spacingUnit:"4px",containerPaddingUnit:"calc(4px * 4)",cellPaddingUnit:"calc(4px * 2)",container:"_1OFta",cell:"_1EBGx"}},649:function(e,t,a){"use strict";a.r(t);a(20),a(21),a(14),a(29),a(34),a(127);var n=a(3),o=a(1344),r=a.n(o),c=a(4),i=a.n(c),s=a(1),l=a.n(s),u=a(0),m=a.n(u),d=a(16),p=a(270),f=a(298),h=a(1484),b=a(1488),g=a(640),v=a(6),y=a(31);var O=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new _(e,this.predicate,this.source))},e}(),_=function(e){function t(t,a,n){var o=e.call(this,t)||this;return o.predicate=a,o.source=n,o.count=0,o.index=0,o}return v.a(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(y.a),E=a(1498),I=a(303);var S=a(1481),w=a(269),j=a(1480),R=a(1483),T=a(1496),N=a(1501),D=a(9),C=a(55),P=a(17),k=a(136),x=a(95),L=a(26),U=a(192),B=a(140),M=a(995),F=a(426),A=a(38),W=a(201),q=a(542),z=a(7),H=a(46),Z=a(25),G=a(11),V=a.n(G),K=a(425),Y=a.n(K),J=a(1045),X=a.n(J),Q=a(199),$=(a(109),a(1347)),ee=a.n($),te=a(157),ae=a.n(te),ne=a(171),oe=a.n(ne),re=a(200),ce=a.n(re),ie=a(1033);function se(e){var t=ce()(e,ie.c).map(function(e){return e.title});return ee()(t)}function le(e,t){var a=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).cleanVersion,n=void 0!==a&&a,o=[n?"Download this photo":"Download this free HD photo"];if(t.tags&&!n){var r=se(t.tags);o.push("of",r)}if(oe()(t,"location.city")||oe()(t,"location.country")){var c=[t.location.city,t.location.country].filter(function(e){return!!e}).join(", ");o.push("in ".concat(c))}return o.push("by ".concat(e.name," (@").concat(e.username,")")),o.join(" ")}function ue(e){var t=e.user,a=function(e,t){var a=oe()(t,"story.title"),n="photo by ".concat(e.name," (@").concat(e.username,") on Unsplash");if(a)return ae()("".concat(a," ").concat(n));if(Object(H.d)(t)){var o=se(t.tags);return ae()("".concat(o," HD ").concat(n))}return"HD ".concat(n)}(t,e),o=le(t,e),r=function(e){var t=e.id,a=e.slug,n=a?"".concat(t,"/").concat(a):t;return"https://unsplash.com/photos/".concat(n)}(e),c=le(t,e,{cleanVersion:!0});return{title:a,description:o,canonicalUrl:r,meta:Object(Q.f)({userOption:n.a.some(t),photoOption:n.a.some(e),title:a,description:o,socialDescriptionOption:n.a.some(c),canonicalUrl:r})}}var me=a(266),de=a(1135),pe=a(1162),fe=a(172),he=a(356),be=a(1115),ge=a(1114),ve=a(51),ye=a(1134),Oe=a(220),_e=a(130),Ee=a(5),Ie=a(1348),Se=a.n(Ie);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Re(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var De=Object(Ee.unionize)({NotRequired:Object(Ee.ofType)(),Truncated:Object(Ee.ofType)(),Expanded:Object(Ee.ofType)()}),Ce=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=Re(this,Te(t).call(this,e))).updateRef=function(e){a.textElRef=e},a.state=a.getInitialState(),a}var a,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(t,u["PureComponent"]),a=t,(o=[{key:"getInitialState",value:function(){return{doesRequireTruncation:!0,shouldForceTruncation:!0}}},{key:"componentDidMount",value:function(){var e,t,a=this,o=(t=n.a.of(a.textElRef).get(),(e=t).offsetWidth<e.scrollWidth);this.setState({doesRequireTruncation:o,shouldForceTruncation:!1})}},{key:"render",value:function(){var e,t,a,o,r,c,i,s=this.props,l=s.text,u=s.containerClassNameTruncated,d=s.containerClassNameExpanded,p=s.containerClassNameTruncationNotRequired,f=(e=this.props,t=this.state,a=e.onRequestToggle,o=e.shouldTruncateIfRequired,r=e.shouldShowTruncateButtonWhenExpanded,c=t.doesRequireTruncation,i=t.shouldForceTruncation,c?i||o?De.Truncated({onRequestToggle:a}):De.Expanded({onRequestToggle:a,shouldShowTruncateButton:r}):De.NotRequired({})),h=De.match({Truncated:function(e){var t=e.onRequestToggle;return n.a.some({buttonText:"Read more",onRequestToggle:t})},Expanded:function(e){var t=e.onRequestToggle;return e.shouldShowTruncateButton?n.a.some({buttonText:"Show less",onRequestToggle:t}):n.a.none()},NotRequired:function(){return n.a.none()}})(f);return m.a.createElement("div",{className:V()(Se.a.container,De.match({Truncated:function(){return[Se.a.containerTruncated,u]},Expanded:function(){return[d]},NotRequired:function(){return[p]}})(f))},m.a.createElement("p",{ref:this.updateRef,className:V()(Se.a.text,De.match({Truncated:function(){return Se.a.textTruncated}},function(){return Se.a.textNotTruncated})(f))},l)," ",h.map(function(e){var t=e.buttonText,a=e.onRequestToggle;return m.a.createElement("button",{className:Se.a.toggleButton,onClick:a},t)}).orUndefined())}}])&&je(a.prototype,o),r&&je(a,r),t}();Ce.displayName="TruncatedTextToggle";var Pe=Ce,ke=a(1350),xe=a.n(ke),Le=Object(_e.progressivelyEnhance)(function(e){var t=e.description,a=e.shouldTruncate,n=e.onRequestToggleTruncation;return m.a.createElement(Pe,{key:t,text:t,containerClassNameTruncationNotRequired:xe.a.descriptionTruncationNotRequired,containerClassNameExpanded:xe.a.descriptionExpanded,containerClassNameTruncated:xe.a.descriptionTruncated,shouldTruncateIfRequired:a,shouldShowTruncateButtonWhenExpanded:!1,onRequestToggle:n})}),Ue=a(1352),Be=a.n(Ue),Me=function(e){return m.a.createElement("div",{className:Be.a.textContainerItem},e)},Fe=function(e){var t=e.photo,a=e.location,o=e.shouldTruncateDescription,r=e.onRequestToggleTruncatedDescription,c={pathname:Object(Oe.b)({photoId:t.id}),state:a.state},i={pathname:Object(Oe.c)({photoId:t.id}),state:a.state},s=Object(H.d)(t)?n.a.of(t.story.description):n.a.none(),l=Object(H.d)(t)?n.a.of(t.location).map(function(e){return e.title}):n.a.none(),u={url:t.links.html,title:n.a.of(t.description).getOrElse(""),text:Object(he.b)(t.user)};return m.a.createElement("div",{className:Be.a.container},m.a.createElement("div",{className:Be.a.textContainer},l.map(function(e){return m.a.createElement(pe.a,{to:Object(fe.b)(e),className:Be.a.locationLink},m.a.createElement(ge.a,{className:Be.a.locationIcon}),m.a.createElement("span",{className:Be.a.locationTitle},e))}).map(Me).orUndefined(),s.map(function(e){return m.a.createElement(Le,{description:e,shouldTruncate:o,onRequestToggleTruncation:r})}).map(Me).orUndefined()),m.a.createElement("div",{className:Be.a.cell},m.a.createElement(ye.a,{shareLocationDescriptor:i,shareOptions:u,className:Be.a.smallButton})),m.a.createElement("div",{className:Be.a.cell},m.a.createElement(ve.a,{className:Be.a.button,tag:"link",buttonType:"outline",buttonSize:"small",to:c},m.a.createElement(be.a,{className:Be.a.buttonIcon}),m.a.createElement("span",{className:Be.a.buttonText},"Info"))))};Fe.displayName="Footer";var Ae=Fe,We=a(1132),qe=a(1141),ze=a(1142),He=a(1052),Ze=a(12),Ge=a(1103),Ve=a(1053),Ke=a(1116),Ye=a.n(Ke),Je=Object(Ze.createSelector)(function(e,t){return t},function(e){return Object(Ge.a)({photo:e,className:Ye.a.secondaryLabel}).getOrElse(Ve.a.Username({}))}),Xe=Object(d.connect)(function(e,t){return{secondaryLabel:Je(e,t.photo)}})(function(e){var t=e.className,a=e.location,n=e.photo,o=e.isLoggedIn,r=e.secondaryLabel,c=o?void 0:"green",i=o?"Download":"Download free";return m.a.createElement("header",{className:V()(t,Ye.a.container)},m.a.createElement("div",{className:Ye.a.photographer},m.a.createElement(He.a,{includeAvatar:!0,userId:n.user.id,secondaryLabel:r,type:"emphasiseUsername"})),m.a.createElement("div",{className:Ye.a.actions},m.a.createElement("div",{className:Ye.a.buttonCell},m.a.createElement(ze.a,{photoId:n.id,location:a})),m.a.createElement("div",{className:Ye.a.buttonCell},m.a.createElement(We.a,{photoId:n.id,location:a})),m.a.createElement("div",{className:Ye.a.downloadButtonCell},m.a.createElement(qe.a,{photoId:n.id,showLabel:!0,type:c,label:i,className:Ye.a.downloadButton}))))}),Qe=a(429),$e=a(23),et=Object($e.a)("M19 3v3h4.8l-4.4 4.5 2 2L26 8.2v5h3V3M6 24v-4.6H3V29h9.6v-3H8l5-5-2-2"),tt=Object($e.a)("M3 19v3h4.8l-4.4 4.5 2 2L10 24v5h3V19m9-11V3.4h-3V13h9.6v-3H24l5-5-2-2"),at=a(1054),nt=(a(73),a(74),a(54),a(18)),ot=a(428),rt=a(277),ct=a(1113),it=a(1150),st=a.n(it);function lt(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ut=Object(Ee.unionize)({Unenhanced:Object(Ee.ofType)(),Enhanced:Object(Ee.ofType)()}),mt=function(e){var t=e.magicalVerticalOffset,a=function(){var e=Object(ot.e)(10),a=20+t,n=Object(ot.g)(Ke.outerHorizontalGutter);return{TOTAL_HORIZONTAL_PADDING:2*n,TOTAL_VERTICAL_PADDING:a,HORIZONTAL_PADDING_LENGTH:Object(ot.e)(n),VERTICAL_PADDING_LENGTH:e}},o=Object(ot.i)(1),r=a(),c=r.TOTAL_HORIZONTAL_PADDING,s=r.TOTAL_VERTICAL_PADDING,l=function(){var e=a(),t=e.TOTAL_HORIZONTAL_PADDING,n=e.TOTAL_VERTICAL_PADDING;return{IMAGE_WIDTH_CONSTRAINED_TO_VIEWPORT_WIDTH_LENGTH:Object(ot.a)("".concat(o," - ").concat(Object(ot.e)(t))),IMAGE_HEIGHT_CONSTRAINED_TO_VIEWPORT_HEIGHT_LENGTH:Object(ot.a)("".concat("100vh"," - ").concat(Object(ot.e)(n)))}}(),u=l.IMAGE_WIDTH_CONSTRAINED_TO_VIEWPORT_WIDTH_LENGTH,m=l.IMAGE_HEIGHT_CONSTRAINED_TO_VIEWPORT_HEIGHT_LENGTH,d=function(e){var t,a=e.photoDimensions;if(Object(ct.b)(a)){var n=a.width/a.height;return t=500,Math.ceil(t*n)}return 500},p=function(e){var t,a=e.photoDimensions,n=a.width/a.height,o=d({photoDimensions:a});return{minWidthLength:Object(ot.e)(o),maxWidthLength:(t=m,Object(ot.a)("(".concat(t,") * ").concat(Object(rt.c)(n))))}},f=function(e){var t=e.photoDimensions;if(e.isZoomedOut){var a=p({photoDimensions:t}),n=a.minWidthLength,r=a.maxWidthLength,i=function(e){var t,a=e.photoDimensions,n=a.width,o=a.height,r=o/n,i=d({photoDimensions:a}),l=(t=i,Math.ceil(t*r)),u=["(max-width: ".concat(Object(ot.e)(i+c),")"),"(max-height: ".concat(Object(ot.e)(l+s),")")],m="".concat(n,"/").concat(o);return{isMinSizeMediaConditions:u,isConstrainedByViewportHeightMediaCondition:"(min-aspect-ratio: ".concat(m,")")}}({photoDimensions:t}),l=i.isMinSizeMediaConditions,m=i.isConstrainedByViewportHeightMediaCondition;return lt(l.map(function(e){return{mediaCondition:e,width:n}})).concat([{mediaCondition:m,width:r},{width:u}])}return[{width:o}]},h=i()(function(e){var t=e.photoDimensions,a=e.zoomableOptions;return lt([{mediaCondition:it.isFixedMediaCondition,width:o}]).concat(lt(f({photoDimensions:t,isZoomedOut:a.isZoomedOut})))},Qe.d);return{getPaddingConstants:a,getImgSrcSetString:function(e){var t=e.photoDimensions,a=e.baseUrl,o=t.width,r=function(e){var t,a=e.photoDimensions,n=a.width,o=n/a.height;return{lowerBound:(t=500,Math.ceil(t*o)),upperBound:n}}({photoDimensions:t}),c=r.lowerBound,i=r.upperBound;return Object(Qe.c)({baseUrl:a,lowerBound:c,upperBound:i,originalWidth:o,interval:300,getParams:n.a.some(function(){return{q:80}})})},getMinAndMaxWidthsLengths:p,getImgSizesString:h,createFallbackSrc:function(e){return Object(nt.b)({url:e,width:String(1e3),q:"80"})}}};function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ft(e,t){return!t||"object"!==dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gt=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=ft(this,ht(t).call(this,e))).renderZoomableImageOverlay=function(e){var t=e.isZoomedOut?et:tt;return m.a.createElement("div",{className:st.a.overlay},m.a.createElement("div",{className:st.a.overlayChild},m.a.createElement(t,{className:st.a.zoomToggleIcon})))},a.renderImage=function(){var e=a.props,t=e.photo,o=e.maybeInitialSrc,r=e.onImgLoad,c=e.magicalVerticalOffset,i=e.renderType,s=a.state.shouldUseInitialSrcIfAvailable,l=t.urls.raw,u=mt({magicalVerticalOffset:c}),d=u.getImgSizesString,p=u.getImgSrcSetString,f=u.createFallbackSrc,h={width:t.width,height:t.height},b=d({zoomableOptions:i.zoomable,photoDimensions:h}),g=function(){return p({photoDimensions:h,baseUrl:l})},v=s?o.map(function(e){return Object(Qe.e)([{url:e}])}).getOrElseL(g):g(),y=f(l);return m.a.createElement(at.a,{imgDimensions:t,containerClassName:st.a.imagePlaceholder,key:t.id,sizes:b,srcSet:v,onLoad:r,src:y,alt:n.a.of(t.description).orUndefined()})},a.renderZoomableImageButton=function(e){var t=e.isZoomedOut,n=e.onRequestToggleZoom,o=V()(st.a.imageButton,t?st.a.imageButtonZoomedOut:st.a.imageButtonZoomedIn);return m.a.createElement("button",{className:o,onClick:n},a.renderZoomableImageOverlay(e),a.renderImage())},a.renderZoomableImageContainer=function(){var e=a.props,t=e.photo,n=e.magicalVerticalOffset,o=e.renderType,r=mt({magicalVerticalOffset:n}),c=r.getMinAndMaxWidthsLengths,i=r.getPaddingConstants,s=o.zoomable.isZoomedOut,l=i(),u=l.HORIZONTAL_PADDING_LENGTH,d=l.VERTICAL_PADDING_LENGTH,p=c({photoDimensions:{width:t.width,height:t.height}}),f=p.minWidthLength,h=p.maxWidthLength;return m.a.createElement("div",{style:s?{padding:"".concat(d," ").concat(u)}:{}},m.a.createElement("div",{style:s?{minWidth:f,maxWidth:h}:{},className:st.a.imageContainer},ut.match({Unenhanced:a.renderImage,Enhanced:function(e){return a.renderZoomableImageButton(e.zoomable)}})(o)))},a.state=a.getInitialState(),a}var a,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(t,u["PureComponent"]),a=t,(o=[{key:"getInitialState",value:function(){return{shouldUseInitialSrcIfAvailable:!0}}},{key:"componentDidMount",value:function(){var e=this;requestAnimationFrame(function(){requestAnimationFrame(function(){e.disableInitialSrc()})})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.photo;e.photo.id!==t.id&&this.setState(this.getInitialState)}},{key:"componentDidUpdate",value:function(){var e=this;this.state.shouldUseInitialSrcIfAvailable&&requestAnimationFrame(function(){requestAnimationFrame(function(){e.state.shouldUseInitialSrcIfAvailable&&e.disableInitialSrc()})})}},{key:"disableInitialSrc",value:function(){this.setState({shouldUseInitialSrcIfAvailable:!1})}},{key:"render",value:function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:st.a.isFixed},this.renderImage()),m.a.createElement("div",{className:st.a.isZoomable},this.renderZoomableImageContainer()))}}])&&pt(a.prototype,o),r&&pt(a,r),t}(),vt=a(1140),yt=a(1082),Ot=a(1110),_t=a(1042),Et=a(1356),It=a.n(Et),St=Object(Ot.a)(_t.b),wt=_t.a.Multi({shouldUseContainerPadding:!1}),jt=function(e){var t=e.photoIdsRemoteData,a=function(e){var t=e.bodyPhotoIdsRemoteData;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:It.a.clearfix},m.a.createElement("h4",{className:It.a.heading},"Related photos")),m.a.createElement("div",{className:It.a.contentContainer},function(e){var t=e.bodyPhotoIdsRemoteData;switch(t.type){case Z.f.Reloading:case Z.f.Success:return m.a.createElement(St,{photoIds:t.value,mode:wt});case Z.f.Loading:return m.a.createElement(me.a,{padContentBelow:!1})}}({bodyPhotoIdsRemoteData:t})))};switch(t.type){case Z.f.Reloading:case Z.f.Loading:return a({bodyPhotoIdsRemoteData:t});case Z.f.Success:return 0===t.value.length?null:a({bodyPhotoIdsRemoteData:t});case Z.f.Failure:case Z.f.NotAsked:return null}},Rt=function(e){var t=e.type===H.a.related?"Related collections":"Featured in ".concat(e.total," collections"),a=e.results.map(function(e){return e.id});return m.a.createElement(vt.a,{relatedCollectionIds:a,heading:t})},Tt=function(e){var t=e.photo,a=e.relatedPhotoIdsRemoteData,o=n.a.of(Object(H.d)(t)?t.related_collections:void 0),r=Object(H.d)(t)?n.a.some(t.tags):n.a.none();return m.a.createElement(m.a.Fragment,null,m.a.createElement(jt,{photoIdsRemoteData:a}),o.map(Rt).getOrElse(void 0),r.map(function(e){return m.a.createElement(yt.a,{headingCopy:"Related tags",keywords:e,showHeading:!0})}).orUndefined())},Nt=a(1358),Dt=a.n(Nt),Ct=function(e){var t=e.location,a=e.maybeCachedPhoto,n=e.photoFullInfoRemoteData,o=e.maybeMainImageInitialSrc,r=e.relatedPhotoIdsRemoteData,c=e.onMainImageLoad,i=e.shouldTruncateDescription,s=e.onRequestToggleTruncatedDescription,l=e.isLoggedIn,u=e.children,d=e.mainImageRenderType,p=function(e){var a=e.photo,n=ue(a),u=n.title,p=n.meta,f=n.canonicalUrl,h=Object(P.c)(t),b=h?155:200;return m.a.createElement("div",{className:Dt.a.wrapper},m.a.createElement(Y.a,{title:u,meta:p,link:Object(Q.e)(f)}),m.a.createElement("div",null,m.a.createElement("div",{className:V()(h&&Dt.a.stickyHeaderContainer)},m.a.createElement(Xe,{photo:a,location:t,isLoggedIn:l})),m.a.createElement(de.a,{photoId:a.id},m.a.createElement(gt,{renderType:d,maybeInitialSrc:o,photo:a,onImgLoad:c,magicalVerticalOffset:b})),m.a.createElement(Ae,{photo:a,location:t,shouldTruncateDescription:i,onRequestToggleTruncatedDescription:s})),m.a.createElement("div",{className:Dt.a.container},m.a.createElement(Tt,{photo:a,relatedPhotoIdsRemoteData:r})))};return function(e){return m.a.createElement("div",{"data-test":"photos-route"},e,u)}(a.filter(H.c).map(function(e){return p({photo:e})}).getOrElseL(function(){switch(n.type){case Z.f.Reloading:case Z.f.Success:return p({photo:n.value});case Z.f.Loading:return m.a.createElement("div",{className:Dt.a.spinnerWrapper},m.a.createElement(me.a,{padContentBelow:!1}));case Z.f.NotAsked:case Z.f.Failure:return null}}))};Ct.displayName="Photos";var Pt,kt=X()(Ct),xt=a(212),Lt=a(1360),Ut=a.n(Lt),Bt=function(e){return{backgroundImage:["linear-gradient(hsla(0, 0%, 100%, 0.8), white 150px)",Object(nt.x)(e)].join(", ")}},Mt=function(e){return function(e){var t=e.maybeRawPhotoUrl,a=e.maybeMainImageCurrentSrc;return t.map(function(e){return Object(nt.b)({url:e,width:String(200),blur:String(20)})}).orElse(a)}({maybeRawPhotoUrl:e.maybeRawPhotoUrl,maybeMainImageCurrentSrc:e.maybeMainImageCurrentSrc}).map(Bt).orUndefined()},Ft=function(e){var t=e.photoId,a=e.maybeRawPhotoUrl,n=e.maybeMainImageCurrentSrc,o=e.modalLocationState,r=e.children;return m.a.createElement(xt.a,{redirectTo:{pathname:"/photos/".concat(t)},modalLocationState:o,contentStyles:Mt({maybeRawPhotoUrl:a,maybeMainImageCurrentSrc:n}),contentClassName:Ut.a.modalContent},r)},At=a(1075),Wt=Object($e.a)("M27.5 18.08a1 1 0 0 0-1.42 0l-9.08 8.59v-23.67a1 1 0 0 0-2 0v23.67l-9.08-8.62a1 1 0 1 0-1.38 1.45l10.77 10.23a1.19 1.19 0 0 0 .15.09.54.54 0 0 0 .16.1.94.94 0 0 0 .76 0 .54.54 0 0 0 .16-.1l.15-.09 10.77-10.23a1 1 0 0 0 .04-1.42z"),qt=Object($e.a)("M31.8 15.1l-.2-.4c-3.5-6.9-9.7-11.5-15.6-11.5-6.3 0-12.3 4.5-15.7 11.7l-.2.4c-.2.5-.2 1.1 0 1.6l.2.4c3.6 7 9.7 11.5 15.6 11.5 6.3 0 12.3-4.5 15.6-11.6l.2-.4c.4-.5.4-1.2.1-1.7zm-2 1.2c-3 6.5-8.3 10.5-13.8 10.5-5.2 0-10.6-4.1-13.8-10.4l-.2-.4.1-.3c3.1-6.5 8.4-10.5 13.9-10.5 5.2 0 10.6 4.1 13.8 10.4l.2.4-.2.3zm-13.8-6.6c-3.5 0-6.3 2.8-6.3 6.3s2.8 6.3 6.3 6.3 6.3-2.8 6.3-6.3-2.8-6.3-6.3-6.3zm0 10.6c-2.4 0-4.3-1.9-4.3-4.3s1.9-4.3 4.3-4.3 4.3 1.9 4.3 4.3-1.9 4.3-4.3 4.3z"),zt=Object($e.a)("M28.7 5.5c-1.6-1.5-3.6-2.4-5.7-2.4s-4.2.8-5.7 2.4l-1.3 1.6-1.3-1.6c-1.5-1.5-3.6-2.4-5.7-2.4s-4.1.9-5.7 2.4c-3.1 3.1-3.1 8.2 0 11.4l10.8 11.1c.5.5 1.2.8 1.9.8s1.4-.3 1.9-.8l10.7-11.2c3.2-3.1 3.2-8.2.1-11.3zm-1.5 10l-10.7 11.1c-.1.1-.3.2-.5.2s-.4-.1-.5-.2l-10.7-11.1c-2.3-2.4-2.3-6.2 0-8.5 1.1-1.2 2.6-1.9 4.2-1.9s3.1.6 4.2 1.7l2.8 3.4 2.7-3.4c1.1-1.1 2.6-1.8 4.2-1.8s3.1.6 4.2 1.8c2.5 2.5 2.5 6.3.1 8.7z"),Ht=a(56),Zt=a(27),Gt=function(e){return"Æ/".concat(e)},Vt=function(e){return"".concat(e,"s")},Kt=function(e){return"".concat(e,"mm")},Yt=a(1362),Jt=a.n(Yt);!function(e){e[e.views=0]="views",e[e.downloads=1]="downloads",e[e.likes=2]="likes"}(Pt||(Pt={}));var Xt=function(){return m.a.createElement("div",{className:Jt.a.container},m.a.createElement("div",{className:Jt.a.cell},m.a.createElement(me.a,{padContentBelow:!1})))},Qt=function(e){var t=e.type,a=e.statRemoteData,n=function(e){switch(e){case Pt.views:return qt;case Pt.downloads:return Wt;case Pt.likes:return zt}}(t);return m.a.createElement("div",{className:Jt.a.stat},m.a.createElement("dt",{className:Jt.a.statLabel},m.a.createElement(n,{className:Jt.a.statLabelIcon}),m.a.createElement("span",{className:Jt.a.statLabelText},function(e){switch(e){case Pt.views:return"Views";case Pt.downloads:return"Downloads";case Pt.likes:return"Likes"}}(t))),function(e){var t=e.statRemoteData;switch(t.type){case Z.f.Success:var a=t.value;return m.a.createElement("dd",{className:Jt.a.statValue},m.a.createElement("span",{className:Jt.a.statValueTotal},Object(nt.i)(a.total)),m.a.createElement("span",{className:Jt.a.statValueDelta},Object(nt.k)(a.historical.change)," since last month"));case Z.f.Loading:return m.a.createElement("dd",{className:Jt.a.statValue},m.a.createElement("div",{className:Jt.a.statValueTotalPlaceholder}),m.a.createElement("div",{className:Jt.a.statValueDeltaPlaceholder}))}}({statRemoteData:a}))},$t=function(e){return m.a.createElement("dl",{className:Jt.a.stats},Qt({type:Pt.views,statRemoteData:e.views}),Qt({type:Pt.downloads,statRemoteData:e.downloads}),Qt({type:Pt.likes,statRemoteData:e.likes}))},ea=function(e){var t=e.maybeCachedPhotoStats,a=e.photoStatsRemoteData;return t.map(function(e){return $t({views:new Z.e(e.views),downloads:new Z.e(e.downloads),likes:new Z.e(e.likes)})}).orElseL(function(){switch(a.type){case Z.f.NotAsked:return n.a.none();case Z.f.Failure:return n.a.some((a.value,m.a.createElement("div",{className:Jt.a.container},m.a.createElement("div",{className:Jt.a.cell},m.a.createElement("p",{className:Jt.a.p},"Sorry, there was an error loading stats. Please try again later.")))));case Z.f.Reloading:case Z.f.Success:var e=a.value;return n.a.some($t({views:new Z.e(e.views),downloads:new Z.e(e.downloads),likes:new Z.e(e.likes)}));case Z.f.Loading:return n.a.some($t({views:new Z.b,downloads:new Z.b,likes:new Z.b}))}})},ta=function(e){var t=function(e){var t,a=e.photo;return[{name:"Camera Make",value:(t=a.exif.make,""!==t?t:void 0)},{name:"Camera Model",value:Object(Zt.h)(a.exif.model)},{name:"Focal Length",value:Object(Zt.f)(Kt,Object(Zt.h)(a.exif.focal_length))},{name:"Aperture",value:Object(Zt.f)(Gt,Object(Zt.h)(a.exif.aperture))},{name:"Shutter Speed",value:Object(Zt.f)(Vt,Object(Zt.h)(a.exif.exposure_time))},{name:"ISO",value:Object(Zt.h)(a.exif.iso)},{name:"Dimensions",value:"".concat(a.width," Ã ").concat(a.height)}].map(function(e){var t=e.name,a=e.value;return{name:t,value:Object(Zt.b)(function(){return"--"},a)}})}({photo:e.photo});return m.a.createElement("dl",{className:Jt.a.metadata},t.map(function(e){var t=e.name,a=e.value;return m.a.createElement("div",{key:t,className:Jt.a.metadataItem},m.a.createElement("dt",{className:Jt.a.metadataItemName},t),m.a.createElement("dd",{className:Jt.a.metadataItemValue},a))}))},aa=function(e){var t=e.cachedPhoto,a=e.photoFullInfoRemoteData;return Object(H.d)(t)?n.a.some(ta({photo:t})):function(){switch(a.type){case Z.f.Reloading:case Z.f.Success:return n.a.some(ta({photo:a.value}));case Z.f.Loading:return n.a.some(Xt());case Z.f.NotAsked:return n.a.none();case Z.f.Failure:return n.a.some((a.value,m.a.createElement("div",{className:Jt.a.container},m.a.createElement("div",{className:Jt.a.cell},m.a.createElement("p",{className:Jt.a.p},"Sorry, there was an error loading metadata. Please try again later.")))))}}()},na=function(e){var t=e.auth,a=e.photo,o=(n.a.of(t.user).exists(function(e){return e.username===a.user.username})?n.a.some("/account/photos"):t.isAdmin?n.a.some("/super/photos/".concat(a.id,"/edit")):n.a.none()).map(function(e){return m.a.createElement("a",{href:e},"Edit photo")});return Object(At.b)({render:function(e){return m.a.createElement("div",{className:Jt.a.containerFooter},e)},renderItem:function(e){return m.a.createElement("div",{className:Jt.a.cell},e)}})([{key:"edit-photo",maybeEl:o}])},oa=function(e){var t=e.cachedPhoto,a=e.photoFullInfoRemoteData,o=e.photoStatsRemoteData,r=e.auth,c=Object(nt.h)(new Date(t.created_at)),i=Object(H.e)(t)?n.a.some(t.stats):n.a.none(),s=Object(H.d)(t)?n.a.some(n.a.of(t.story.title).getOrElseL(function(){return"Info"})):n.a.none(),l=Object(At.a)({render:function(e){return e}})([{key:"stats",maybeEl:ea({maybeCachedPhotoStats:i,photoStatsRemoteData:o})},{key:"metadata",maybeEl:aa({cachedPhoto:t,photoFullInfoRemoteData:a})},{key:"other-links",maybeEl:na({photo:t,auth:r})}]);return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:Jt.a.containerTitle},m.a.createElement("div",{className:Jt.a.cell},s.map(function(e){return m.a.createElement("h2",{className:Jt.a.title},e)}).orNull(),m.a.createElement("span",{className:Jt.a.datePublished},"Published on ",m.a.createElement("time",{dateTime:t.created_at},c)))),Object(Ht.f)(l,function(e){return m.a.createElement("hr",{key:"separator-".concat(e),className:Jt.a.hr})}))},ra=Object(d.connect)(function(e,t){return{auth:Object(A.b)(e)}})(function(e){var t=e.maybeCachedPhoto,a=e.photoFullInfoRemoteData,n=e.photoStatsRemoteData,o=e.auth;return t.filter(H.c).map(function(e){return oa({cachedPhoto:e,photoStatsRemoteData:n,auth:o,photoFullInfoRemoteData:a})}).getOrElseL(function(){switch(a.type){case Z.f.Reloading:case Z.f.Success:return oa({cachedPhoto:a.value,photoStatsRemoteData:n,auth:o,photoFullInfoRemoteData:a});case Z.f.Loading:return Xt();case Z.f.NotAsked:case Z.f.Failure:return null}})}),ca=function(e){var t=e.maybeCachedPhoto,a=e.photoId,n=e.maybeMainImageCurrentSrc,o=e.photoFullInfoRemoteData,r=e.photoStatsRemoteData,c=e.modalLocationState,i=t.filter(H.c).map(function(e){return e.urls.raw});return m.a.createElement(Ft,{photoId:a,modalLocationState:c,maybeMainImageCurrentSrc:n,maybeRawPhotoUrl:i},m.a.createElement(ra,{maybeCachedPhoto:t,photoFullInfoRemoteData:o,photoStatsRemoteData:r}))},ia=a(65),sa=a(86),la=a(19),ua=a(213),ma=a(1139),da=a(1364),pa=a.n(da),fa=function(e){var t=e.photo,a=t.links.html,n=function(e){return Object(la.m)(a,{utmSource:e,utmContent:ia.g.PHOTOS_PAGE_SHARE})},o=Object(he.b)(t.user),r=Object(sa.d)(t.urls.raw)({w:2e3}),c=[{url:n("facebook"),type:ua.a.facebook({})},{url:n("pinterest"),type:ua.a.pinterest({message:o,media:r})},{url:n("twitter"),type:ua.a.twitter({message:o})},{url:n("email"),type:ua.a.email({})}];return m.a.createElement(ma.a,{title:"Photo by ".concat(t.user.name),buttonsShareProps:c,link:a})},ha=function(e){var t=e.maybeCachedPhoto,a=e.photoFullInfoRemoteData;return t.filter(H.c).map(function(e){return fa({photo:e})}).getOrElseL(function(){switch(a.type){case Z.f.Reloading:case Z.f.Success:return fa({photo:a.value});case Z.f.Loading:return m.a.createElement("div",{className:pa.a.container},m.a.createElement("div",{className:pa.a.cell},m.a.createElement(me.a,{padContentBelow:!1})));case Z.f.NotAsked:case Z.f.Failure:return null}})},ba=function(e){var t=e.maybeCachedPhoto,a=e.photoId,n=e.maybeMainImageCurrentSrc,o=e.photoFullInfoRemoteData,r=e.modalLocationState;return m.a.createElement(Ft,{photoId:a,modalLocationState:r,maybeMainImageCurrentSrc:n,maybeRawPhotoUrl:t.filter(H.c).map(function(e){return e.urls.raw})},m.a.createElement(ha,{maybeCachedPhoto:t,photoFullInfoRemoteData:o}))},ga=Object(k.e)("photo"),va=function(e){return i()(e.photos.getPhotoWithInfo,Object(w.a)(function(e){return new Z.e(e)}))},ya=function(e){var t=e.value,a=ga(t).entities;return[Object(D.qb)(a),D.a.UpdatePhotoFullInfoRemoteData({photoId:t.id,photoFullInfoRemoteData:e})]};function Oa(e){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _a(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ea(e){return(Ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ia(e,t){return(Ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var wa=Object(k.e)("relatedPhotos"),ja=function(e){function t(e){var a,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Ea(t).call(this,e),(a=!o||"object"!==Oa(o)&&"function"!=typeof o?Sa(n):o).resetNumberOfRequests=function(){a.resetNumberOfRequestsSubject.next({})},a.onRequestToggleTruncatedDescription=function(){var e=a.props.location;a.context.router.history.replace(Object(P.o)(function(e){return{shouldTruncateDescription:!e.shouldTruncateDescription}})(e))},a.state=a.getInitialState(),a.onRequestMainImageToggleZoom=a.onRequestMainImageToggleZoom.bind(Sa(Sa(a))),a.onMainImageLoad=a.onMainImageLoad.bind(Sa(Sa(a))),a.onRootRouteLeaveSubject=new p.a,a.onInfoRouteLeaveSubject=new p.a,a.requestSubject=new p.a,a.resetNumberOfRequestsSubject=new p.a,a}var a,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ia(e,t)}(t,u["PureComponent"]),a=t,(o=[{key:"getDefaultState",value:function(){return{mainImageCurrentSrc:n.a.none()}}},{key:"getInitialState",value:function(){return this.getDefaultState()}},{key:"getResetState",value:function(){return this.getDefaultState()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.renderType;this.setupProgressBar(),F.a.is.Unenhanced(a)||this.fetchThenCacheAndSet(),this.fetchRelatedPhotosThenCacheAndSet(),t.params.subRoute===U.a.info&&this.fetchPhotoStatsThenCacheAndSet()}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props,n=a.match,o=a.maybePhoto,r=a.photoFullInfoRemoteData,c=a.photoStatsRemoteData,i=e.maybePhoto;n.params.id!==e.match.params.id?this.reset():i.forEach(function(e){o.map(function(t){return t!==e}).getOrElse(!0)&&(r.type===Z.f.Success&&Object(H.d)(e)&&t.updatePhotoFullInfoRemoteData(new Z.e(e)),c.type===Z.f.Success&&Object(H.e)(e)&&t.updatePhotoStatsRemoteData(new Z.e(e.stats)))})}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params,a=t.id,n=t.subRoute,o=e.match.params,r=o.id,c=o.subRoute;a!==r&&(this.cleanup(),this.fetchThenCacheAndSet(),this.fetchRelatedPhotosThenCacheAndSet());var i=c===U.a.info,s=n===U.a.info;!i&&s?this.fetchPhotoStatsThenCacheAndSet():i&&!s&&this.onInfoRouteLeaveSubject.next({})}},{key:"componentWillUnmount",value:function(){this.cleanup()}},{key:"setupProgressBar",value:function(){var e=this.requestSubject.asObservable(),t=this.props,a=t.hideProgressBar,n=t.showProgressBar;this.resetNumberOfRequestsSubject.asObservable().pipe(Object(h.a)({}),Object(b.a)(function(){return e.pipe(Object(g.a)(function(e){var t,a=Object(f.a)({}),n=e.pipe(function(e){return e.lift(new O(t,e))});return a.pipe(Object(E.a)(1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(I.a.apply(void 0,[t].concat(e)))}}(n.pipe(Object(E.a)(-1))))}),Object(S.a)(r.a,0),Object(h.a)(0))})).pipe(Object(w.a)(function(e){return e>0}),Object(j.a)()).subscribe(function(e){e?n():a()})}},{key:"cleanup",value:function(){this.onRootRouteLeaveSubject.next({}),this.onInfoRouteLeaveSubject.next({})}},{key:"updatePhotoFullInfoRemoteData",value:function(e){var t=this.props,a=t.updatePhotoFullInfoRemoteData;a({photoId:t.match.params.id,photoFullInfoRemoteData:e})}},{key:"updateRelatedPhotoIdsRemoteData",value:function(e){var t=this.props,a=t.updateRelatedPhotoIdsRemoteData;a({photoId:t.match.params.id,relatedPhotoIdsRemoteData:e})}},{key:"updatePhotoStatsRemoteData",value:function(e){var t=this.props,a=t.updatePhotoStatsRemoteData;a({photoId:t.match.params.id,photoStatsRemoteData:e})}},{key:"reset",value:function(){this.setState(this.getResetState()),this.resetNumberOfRequests()}},{key:"fetchThenCacheAndSet",value:function(){var e=this.props,t=e.match,a=e.maybePhoto,n=e.setErrorFlash,o=e.dispatch,r=t.params.id,c=this.context.router.history.replace;this.updatePhotoFullInfoRemoteData(new Z.b);var i=va(C.a)({photoId:r}).pipe(Object(R.a)(function(e){return Object(f.a)(new Z.a(e))}),Object(T.a)(this.onRootRouteLeaveSubject),Object(N.a)());i.subscribe(function(e){if(o(D.a.RouteDataUpdated({})),e.type===Z.f.Failure)Object(z.d)(e.value)?n({message:"There was a network error. Please check your internet connection."}):(n({message:"There was a server error. Please try again later."}),a.isEmpty()&&Object(L.o)(c)(e.value));else{var t=ya(e);o(D.a.BatchActions({actions:t}))}}),this.requestSubject.next(i)}},{key:"fetchRelatedPhotosThenCacheAndSet",value:function(){var e=this,t=this.props,a=t.match,n=t.updateData,o=t.relatedPhotoIdsRemoteData,r=a.params.id,c=function(){switch(o.type){case Z.f.Reloading:case Z.f.Success:return new Z.d(o.value);case Z.f.Failure:case Z.f.Loading:case Z.f.NotAsked:return new Z.b}}();this.updateRelatedPhotoIdsRemoteData(c);var i=C.a.photos.getRelatedPhotos({photoId:r}).pipe(Object(w.a)(function(e){return{normalizedResponse:wa(e),remoteData:new Z.e(e.results.map(function(e){return e.id}))}}),Object(R.a)(function(e){return Object(f.a)({normalizedResponse:void 0,remoteData:new Z.a(e)})}),Object(T.a)(this.onRootRouteLeaveSubject),Object(N.a)());i.subscribe(function(t){var a=t.normalizedResponse,o=t.remoteData;void 0!==a&&n(a.entities),e.updateRelatedPhotoIdsRemoteData(o)}),this.requestSubject.next(i)}},{key:"fetchPhotoStatsThenCacheAndSet",value:function(){var e=this,t=this.props,a=t.match,n=t.updatePhotoStats,o=a.params.id;this.updatePhotoStatsRemoteData(new Z.b);var r=C.a.photos.getPhotoStats({photoId:o}).pipe(Object(w.a)(function(e){return{response:e,remoteData:new Z.e(e)}}),Object(R.a)(function(e){return Object(f.a)({response:void 0,remoteData:new Z.a(e)})}),Object(T.a)(this.onInfoRouteLeaveSubject),Object(N.a)());r.subscribe(function(t){var a=t.response,r=t.remoteData;void 0!==a&&n(o,a),e.updatePhotoStatsRemoteData(r)}),this.requestSubject.next(r)}},{key:"onRequestMainImageToggleZoom",value:function(){this.trackToggleZoomableMainImageZoom(),this.toggleZoomableMainImageZoom()}},{key:"trackToggleZoomableMainImageZoom",value:function(){var e=this.props,t=e.location,a=e.trackZoomedInPhoto,n=e.trackZoomedOutPhoto,o=e.match.params.id;Object(P.l)({location:t}).zoomableMainImageOptions.isZoomedOut?a(o):n(o)}},{key:"toggleZoomableMainImageZoom",value:function(){var e=this.props,t=e.location,a=e.pageModalScrollResetRequested,n=this.context.router.history;Object(P.c)(t)&&a(),n.replace(Object(P.o)(function(e){var t=e.zoomableMainImageOptions;return{zoomableMainImageOptions:Object.assign({},t,{isZoomedOut:!t.isZoomedOut})}})(t))}},{key:"onMainImageLoad",value:function(e){var t;this.setState({mainImageCurrentSrc:(t=e.currentTarget,n.a.of(t.currentSrc).filter(B.b).orElseL(function(){return n.a.of(t.src).filter(B.b)}))})}},{key:"renderChildRoute",value:function(){var e=this.props,t=e.match,a=e.location,o=e.maybePhoto,r=e.photoFullInfoRemoteData,c=e.photoStatsRemoteData,i=e.renderType,s=t.params.id,l=Object(P.i)(a),u=Object(P.l)({location:a}),d=n.a.of(u.initialSrc),p=t.params.subRoute,f=!Object(P.e)(a)&&F.a.is.Enhanced(i);switch(p){case U.a.info:return l.filter(function(){return f}).map(function(e){return m.a.createElement(ca,{maybeCachedPhoto:o,photoId:s,modalLocationState:e,maybeMainImageCurrentSrc:d,photoFullInfoRemoteData:r,photoStatsRemoteData:c})}).orUndefined();case U.a.share:return l.filter(function(){return f}).map(function(e){return m.a.createElement(ba,{maybeCachedPhoto:o,photoId:s,modalLocationState:e,maybeMainImageCurrentSrc:d,photoFullInfoRemoteData:r})}).orUndefined();case void 0:return}}},{key:"render",value:function(){var e=this,t=this.props,a=t.maybePhoto,o=t.location,r=t.isLoggedIn,c=t.photoFullInfoRemoteData,i=t.relatedPhotoIdsRemoteData,s=t.renderType,l=Object(P.l)({location:o}),u=l.shouldTruncateDescription,d=F.a.match({Unenhanced:function(){return ut.Unenhanced({zoomable:{isZoomedOut:l.zoomableMainImageOptions.isZoomedOut}})},Enhanced:function(){return ut.Enhanced({zoomable:{isZoomedOut:l.zoomableMainImageOptions.isZoomedOut,onRequestToggleZoom:e.onRequestMainImageToggleZoom}})}})(s),p=n.a.of(l.initialSrc);return m.a.createElement(kt,{maybeCachedPhoto:a,location:o,photoFullInfoRemoteData:c,maybeMainImageInitialSrc:p,relatedPhotoIdsRemoteData:i,onMainImageLoad:this.onMainImageLoad,mainImageRenderType:d,shouldTruncateDescription:u,onRequestToggleTruncatedDescription:this.onRequestToggleTruncatedDescription,isLoggedIn:r},this.renderChildRoute())}}])&&_a(a.prototype,o),c&&_a(a,c),t}();ja.contextTypes={router:l.a.object.isRequired};var Ra=Object(x.a)({updateData:D.qb,updatePhotoStats:D.rb,setErrorFlash:D.I,trackZoomedInPhoto:D.kb,trackZoomedOutPhoto:D.lb,showProgressBar:D.P,hideProgressBar:D.s,pageModalScrollResetRequested:D.w,updatePhotoFullInfoRemoteData:D.a.UpdatePhotoFullInfoRemoteData,updateRelatedPhotoIdsRemoteData:D.a.UpdateRelatedPhotoIdsRemoteData,updatePhotoStatsRemoteData:D.a.UpdatePhotoStatsRemoteData}),Ta=i()(Object(M.b)({routeType:M.a.DynamicRoute}),Object(d.connect)(function(){var e=Object(W.f)(),t=Object(q.b)(),a=Object(q.d)(),o=Object(q.c)();return function(r,c){var i=c.match.params.id;return{maybePhoto:n.a.of(e(r,i)),isLoggedIn:Object(A.g)(r),photoFullInfoRemoteData:t(r,{photoId:i}),relatedPhotoIdsRemoteData:a(r,{photoId:i}),photoStatsRemoteData:o(r,{photoId:i})}}},Ra),F.b)(ja);a.d(t,"default",function(){return Ta}),a.d(t,"PhotoFullInfoRemoteData",function(){}),a.d(t,"RelatedPhotoIdsRemoteData",function(){}),a.d(t,"PhotoStatsRemoteData",function(){})},995:function(e,t,a){"use strict";a.d(t,"a",function(){return f}),a.d(t,"b",function(){return b});a(20),a(21),a(14);var n=a(0),o=a.n(n),r=a(16),c=a(9),i=a(95),s=a(128);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f,h=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]])}return a};!function(e){e.StaticRoute="StaticRoute",e.DynamicRoute="DynamicRoute"}(f||(f={}));var b=function(e){var t=e.routeType;return function(e){var a=function(a){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),m(this,d(r).apply(this,arguments))}var c,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(r,n["Component"]),c=r,(i=[{key:"componentDidUpdate",value:function(){t===f.DynamicRoute?this.props.dynamicRouteComponentUpdated({}):this.props.staticRouteComponentUpdated({})}},{key:"render",value:function(){var t=this.props,a=(t.dynamicRouteComponentUpdated,t.staticRouteComponentUpdated,h(t,["dynamicRouteComponentUpdated","staticRouteComponentUpdated"]));return o.a.createElement(e,Object.assign({},a))}}])&&u(c.prototype,i),s&&u(c,s),r}();a.displayName="TrackRouteUpdates(".concat(Object(s.a)(e),")");var l=Object(i.b)()({dynamicRouteComponentUpdated:c.a.DynamicRouteComponentUpdated,staticRouteComponentUpdated:c.a.StaticRouteComponentUpdated});return Object(r.connect)(function(){return{}},l)(a)}}},997:function(e,t,a){e.exports={smallTag:"_6PxCM"}},999:function(e,t,a){e.exports={gutter:"8px",tagsContainer:"_2_OE1",tagItem:"_3Z-ua"}}}]);
//# sourceMappingURL=photos-route.f5cd8.js.map